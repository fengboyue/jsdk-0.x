<!--  -->
<HTML>
<HEAD>
<TITLE></TITLE>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<LINK REL ="stylesheet" TYPE="text/css" HREF="../inc/stylesheet.css">
</HEAD>

<BODY style="margin:5px;">
<div style="float:right;">
<span class="button" onclick="if(window.history.length > 1) window.history.go(-1);">Back</span>
</div>
<div style="margin-left:5px;">jsui\js-ui-core-min.js</div>
<pre class="source">
<span class="multiComment">/*!
 * @project JSDK JavaScript Development Kit
 * @copyright Copyright(c) 2004-2012, Dragonfly.org. All rights reserved.
 * @license LGPLv3
 * 
 * @version 0.2
 * @author feng.chun
 * @date 2011-09-01
 * @date 2011-09-05
 * @date 2011-09-14
 *
 * @version 0.1
 * @author feng.chun
 * @date 2010-08-15
 */</span>
js.lang.System.namespace("js.ui");(<b>function </b>(){<b>var </b>SYS=js.lang.System,D=js.core.Dom,E=js.core.Event,$=js.core.Dom.$;js.ui.Widget=<b>function </b>(config){<b>this</b>._config=config||{};<b>if </b>(!<b>this</b>.get("lazyInit")){<b>this</b>._init();}};js.ui.Widget.prototype={render:<b>function </b>(){},load:<b>function </b>(url){},_init:<b>function </b>(config){<b>if </b>(config){<b>this</b>._config=config;}<b>var </b>id=<b>this</b>.get("id")||SYS.getUUID();<b>this</b>.set("id",id);<b>this</b>.createEvent("destorying",<b>true</b>);<b>this</b>.createEvent("destoryed",<b>true</b>);<b>this</b>.createEvent("rendering");<b>this</b>.createEvent("rendered");<b>this</b>.createEvent("loading");<b>this</b>.createEvent("loaded");<b>this</b>.createEvent("showing");<b>this</b>.createEvent("showed");<b>this</b>.createEvent("hiding");<b>this</b>.createEvent("hided");<b>this</b>.createEvent("enabling");<b>this</b>.createEvent("enabled");<b>this</b>.createEvent("disabling");<b>this</b>.createEvent("disabled");<b>this</b>.createEvent("xMoving");<b>this</b>.createEvent("xMoved");<b>this</b>.createEvent("yMoving");<b>this</b>.createEvent("yMoved");<b>this</b>.createEvent("wResizing");<b>this</b>.createEvent("wResized");<b>this</b>.createEvent("hResizing");<b>this</b>.createEvent("hResized");<b>this</b>.createEvent("reconfiging");<b>this</b>.createEvent("reconfiged");},set:<b>function </b>(k,v){<b>var </b>old=<b>this</b>._config[k];<b>this</b>.fireEvent("reconfiging",k,old,v);<b>this</b>._config[k]=v;<b>this</b>.fireEvent("reconfiged",k,old,v);},get:<b>function </b>(k){<b>return</b> k?<b>this</b>._config[k]:<b>this</b>._config;},getId:<b>function </b>(){<b>return</b> <b>this</b>.get("id");},getWidgetClass:<b>function </b>(){<b>return</b> <b>this</b>.get("widgetClass");},DOM_ATTRIBUTES:{id:1,name:1,title:1,type:1,cssName:1,cssText:1,value:1,validate:1,widgetClass:1},STYLE_ATTRIBUTES:{display:1,width:1,height:1,x:1,y:1,z:1},attachEvent:<b>function </b>(eventName,fn,agrs,context){<b>if </b>(<b>this</b>.hasEvent(eventName)){<b>this</b>.subscribe(eventName,fn,agrs,context||<b>this</b>);<b>return</b> <b>true</b>;}<b>else </b>{<b>var </b>attachTo=<b>this</b>.getId();<b>switch </b>(eventName){case"focusin":<b>return</b> E.addFocusListener(attachTo,fn,agrs,context||<b>this</b>);case"focusout":<b>return</b> E.addBlurListener(attachTo,fn,agrs,context||<b>this</b>);default:<b>return</b> E.addListener(attachTo,eventName,fn,agrs,context||<b>this</b>);}}},detachEvent:<b>function </b>(eventName,fn,agrs,context){<b>if </b>(<b>this</b>.hasEvent(eventName)){<b>this</b>.unsubscribe(eventName,fn,agrs,context||<b>this</b>);<b>return</b> <b>true</b>;}<b>else </b>{<b>var </b>attachTo=<b>this</b>.getId();<b>switch </b>(eventName){case"focusin":<b>return</b> E.removeFocusListener(attachTo,fn,agrs,context||<b>this</b>);case"focusout":<b>return</b> E.removeBlurListener(attachTo,fn,agrs,context||<b>this</b>);default:<b>return</b> E.removeListener(attachTo,eventName,fn,agrs,context||<b>this</b>);}}},_parseConfig:<b>function </b>(){<b>var </b>dAttrs={},sAttrs={position:<b>this</b>._config.hasOwnProperty("x")||<b>this</b>._config.hasOwnProperty("y")?"absolute":"relative"},html;<b>for </b>(k<b> in </b><b>this</b>._config){<b>if </b>(k=="html"){html=<b>this</b>._config[k];}<b>else </b>{<b>if </b>(k=="id"||<b>this</b>.DOM_ATTRIBUTES[k]){dAttrs[k]=<b>this</b>._config[k];}<b>else </b>{<b>if </b>(<b>this</b>.STYLE_ATTRIBUTES[k]){sAttrs[k]=<b>this</b>._config[k];}}}}<b>return</b>[dAttrs,sAttrs,html];},_renderHTMLWidget:<b>function </b>(tag){<b>var </b>el=$(<b>this</b>.getId()),p=<b>this</b>._parseConfig();<b>if </b>(!el){<b>var </b>ct=<b>this</b>.getParentEl()||document.body;<b>if </b>(ct){ct.appendChild(D.createEl(tag,p[0],p[1],p[2]));}<b>else </b>{<b>throw </b><b>new </b>Error();}}<b>else </b>{D.updateEl(el,p[0],p[1],p[2]);}},destory:<b>function </b>(){<b>this</b>.fire("destorying");<b>var </b>el=$(<b>this</b>.getId());<b>if </b>(el&&el.parentNode){E.purgeElement(el,<b>true</b>);el.parentNode.removeChild(el);}<b>this</b>.fire("destoryed");<b>this</b>.unsubscribeAll();<b>if </b>(<b>this</b>.removeAllKeys){<b>this</b>.removeAllKeys();}},getEl:<b>function </b>(){<b>return</b> $(<b>this</b>.getId());},getParentEl:<b>function </b>(){<b>return</b> $(<b>this</b>.get("parent"));},getSize:<b>function </b>(){<b>var </b>el=<b>this</b>.getEl();<b>return</b> el?[el.offsetWidth,el.offsetHeight]:<b>null</b>;},setSize:<b>function </b>(width,height){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}<b>var </b>size=<b>this</b>.getSize();<b>if </b>(size[0]==width&&size[1]==height){<b>return</b>;}<b>this</b>.fireEvent("resizing",size);<b>this</b>.set("width",width);<b>this</b>.set("height",height);el.style.width=width+"px";el.style.height=height+"px";<b>this</b>.fireEvent("resized",[width,height]);},show:<b>function </b>(){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}<b>this</b>.fireEvent("showing");<b>this</b>.set("display","");el.style.display="";el.blur();<b>this</b>.fireEvent("showed");},hide:<b>function </b>(){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}<b>this</b>.fireEvent("hiding");<b>this</b>.set("display","none");el.style.display="none";<b>this</b>.fireEvent("hided");},enable:<b>function </b>(){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}<b>this</b>.fireEvent("enabling");<b>this</b>.set("disabled",<b>false</b>);el.disabled=<b>false</b>;<b>this</b>.fireEvent("enabled");},disable:<b>function </b>(){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}<b>this</b>.fireEvent("enabling");<b>this</b>.set("disabled",<b>true</b>);el.disabled=<b>true</b>;<b>this</b>.fireEvent("enabled");},setXY:<b>function </b>(x,y,isSilent){<b>this</b>.setX(x,isSilent);<b>this</b>.setY(y,isSilent);},setX:<b>function </b>(x,isSilent){<b>if </b>(SYS.isUndefined(x)||x==<b>null</b>){<b>return</b>;}<b>var </b>oldX=D.getX(<b>this</b>.getId()),isMoved=oldX==x?<b>false</b>:<b>true</b>;<b>if </b>(isMoved){<b>if </b>(!isSilent){<b>this</b>.fireEvent("xMoving",x,oldX);}<b>this</b>.set("x",x);D.setX(<b>this</b>.getEl(),x);<b>if </b>(isSilent){<b>this</b>.fireEvent("xMoved",x,oldX);}}},setY:<b>function </b>(y,isSilent){<b>if </b>(SYS.isUndefined(y)||y==<b>null</b>){<b>return</b>;}<b>var </b>oldY=D.getY(<b>this</b>.getId()),isMoved=oldY==y?<b>false</b>:<b>true</b>;<b>if </b>(isMoved){<b>if </b>(!isSilent){<b>this</b>.fireEvent("yMoving",y,oldY);}<b>this</b>.set("y",y);D.setY(<b>this</b>.getEl(),y);<b>if </b>(!isSilent){<b>this</b>.fireEvent("yMoved",y,oldY);}}},getXY:<b>function </b>(){<b>return</b> D.getXY(<b>this</b>.getId());},getX:<b>function </b>(){<b>return</b> <b>this</b>.getXY()[0];},getY:<b>function </b>(){<b>return</b> <b>this</b>.getXY()[1];},getSize:<b>function </b>(){<b>return</b>[<b>this</b>.get("width"),<b>this</b>.get("height")];},setSize:<b>function </b>(w,h,isSilent){<b>this</b>.setWidth(w,isSilent);<b>this</b>.setHeight(h,isSilent);},setWidth:<b>function </b>(n,isSilent){<b>if </b>(SYS.isUndefined(n)||n==<b>null</b>){<b>return</b>;}<b>var </b>old=<b>this</b>.get("width"),isResized=old==n?<b>false</b>:<b>true</b>;<b>if </b>(isResized){<b>if </b>(!isSilent){<b>this</b>.fireEvent("wResizing",n,old);}<b>this</b>.set("width",n);D.setStyle(<b>this</b>.getId(),"width",n);<b>if </b>(!isSilent){<b>this</b>.fireEvent("wResized",n,old);}}},setHeight:<b>function </b>(n,isSilent){<b>if </b>(SYS.isUndefined(n)||n==<b>null</b>){<b>return</b>;}<b>var </b>old=<b>this</b>.get("height"),isResized=old==n?<b>false</b>:<b>true</b>;<b>if </b>(isResized){<b>if </b>(!isSilent){<b>this</b>.fireEvent("hResizing",n,old);}<b>this</b>.set("height",n);D.setStyle(<b>this</b>.getId(),"height",n);<b>if </b>(!isSilent){<b>this</b>.fireEvent("hResized",n,old);}}},alignTo:<b>function </b>(destEl,pos,offsets){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}<b>var </b>xy=D.getXY(el),size=[el.offsetWidth,el.offsetHeight],destEl=$(destEl),destXY=D.getXY(destEl),destSize=[destEl.offsetWidth,destEl.offsetHeight];newX=xy[0],newY=xy[1];<b>switch </b>(pos){case"lt":newX=destXY[0],newY=destXY[1];<b>break</b>;case"ct":newX=destXY[0]+(destSize[0]-size[0])/2,newY=destXY[1];<b>break</b>;case"rt":newX=destXY[0]-size[0],newY=destXY[1];<b>break</b>;case"lc":newX=destXY[0],newY=destXY[1]+(destSize[1]-size[1])/2;<b>break</b>;case"cc":newX=destXY[0]+(destSize[0]-size[0])/2,newY=destXY[1]+(destSize[1]-size[1])/2;<b>break</b>;case"rc":newX=destXY[0]-size[0],newY=destXY[1]+(destSize[1]-size[1])/2;<b>break</b>;case"lb":newX=destXY[0],newY=destXY[1]-size[1];<b>break</b>;case"cb":newX=destXY[0]+(destSize[0]-size[0])/2,newY=destXY[1]-size[1];<b>break</b>;case"rb":newX=destXY[0]-size[0],newY=destXY[1]-size[1];<b>break</b>;}<b>this</b>.setXY(newX+(offsets?offsets[0]:0),newY+(offsets?offsets[1]:0));},setValue:<b>function </b>(v){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b>;}el["value"]=v;},getValue:<b>function </b>(){<b>var </b>el=<b>this</b>.getEl();<b>if </b>(!el){<b>return</b> <b>null</b>;}<b>return</b> el["value"];},_bindEvents:<b>function </b>(w,fnName,events){<b>if </b>(!events||!w[fnName]){<b>return</b>;}<b>for </b>(<b>var </b>i=0,len=events.length;i&lt;len;i++){<b>var </b>event=events[i];<b>if </b>(event){w[fnName].call(w,event["name"],event["fn"],event["args"],event["context"]);}}},_addWidget:<b>function </b>(wgt,widgetClass){<b>if </b>(!wgt){<b>return</b> <b>false</b>;}<b>var </b>w=<b>null</b>;<b>if </b>(wgt<b> instanceof </b>js.ui.Widget){w=wgt;w.set("parent",<b>this</b>.getId());}<b>else </b>{<b>var </b>config=wgt["config"];<b>if </b>(!config){<b>throw </b><b>new </b>TypeError();}config["parent"]=<b>this</b>.getId();w=eval("<b>new </b>"+(widgetClass||config["widgetClass"])+"({lazyInit:<b>true</b>})");w._init(config);<b>this</b>._bindEvents(w,"attachEvent",wgt["domEvents"]);<b>this</b>._bindEvents(w,"subscribe",wgt["uiEvents"]);<b>this</b>._bindEvents(w,"onKeyDown",wgt["keyEvents"]);}<b>this</b>._children[w.getId()]=w;<b>return</b> <b>true</b>;},addChildWidget:<b>function </b>(wgts,widgetClass){<b>if </b>(!wgts){<b>return</b> <b>false</b>;}<b>if </b>(!<b>this</b>._children){<b>this</b>._children={};}<b>if </b>(SYS.isArray(wgts)){<b>for </b>(<b>var </b>i=0,len=wgts.length;i&lt;len;i++){<b>var </b>rtn=<b>this</b>._addWidget(wgts[i],widgetClass);<b>if </b>(!rtn){<b>return</b> <b>false</b>;}}<b>return</b> <b>true</b>;}<b>else </b>{<b>return</b> <b>this</b>._addWidget(wgts,widgetClass);}},getChildWidget:<b>function </b>(id){<b>return</b> id?<b>this</b>._children[id]:<b>this</b>._children;}};SYS.augment(js.ui.Widget,js.core.EventProvider);<b>if </b>(js.input){SYS.augment(js.ui.Widget,js.input.KeyBufferProvider);}}());

</pre>
<hr/>
</BODY>
</HTML>
