<!--  -->
<HTML>
<HEAD>
<TITLE></TITLE>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<LINK REL ="stylesheet" TYPE="text/css" HREF="../inc/stylesheet.css">
</HEAD>

<BODY style="margin:5px;">
<div style="float:right;">
<span class="button" onclick="if(window.history.length > 1) window.history.go(-1);">Back</span>
</div>
<div style="margin-left:5px;">util\js-html5-websocket-min.js</div>
<pre class="source">
<span class="multiComment">/*!
 * @project JSDK JavaScript Development Kit
 * @copyright Copyright(c) 2004-2012, Dragonfly.org. All rights reserved.
 * @license LGPLv3
 * 
 * @version 0.1
 * @author feng.chun
 * @date 2011-9-28
 * 
 * @browsers FF 4+;Chrome 8+
 */</span>
js.lang.System.namespace("js.html5");js.html5.WebSocket=<b>function </b>(b,a,c){<b>if </b>(!window.WebSocket){<b>throw </b><b>new </b>Error("[js.html5.WebSocket]The browser not support HTML5's WebSocket");}<b>this</b>.host=b?b:"localhost";<b>this</b>.port=a?a:80;<b>this</b>.path=c?(c.startsWith("/")?c:"/"+c):"";<b>this</b>._events={};};js.html5.WebSocket.prototype={getStatus:<b>function </b>(){<b>return</b> <b>this</b>._socket?<b>this</b>._socket.readyState:-1;},connect:<b>function </b>(){<b>this</b>._socket=<b>null</b>;<b>this</b>._socket=<b>new </b>WebSocket("ws://"+<b>this</b>.host+":"+<b>this</b>.port+<b>this</b>.path);<b>for </b>(k<b> in </b><b>this</b>._events){<b>this</b>._socket["on"+k]=<b>this</b>._events[k];}},on:<b>function </b>(a,b){<b>if </b>(["open","message","close","error"].indexOf(a)&lt;0){<b>return</b>;}<b>if </b>(!b){<b>return</b>;}<b>this</b>._events[a]=b;},send:<b>function </b>(a){<b>if </b>(!<b>this</b>._socket){<b>throw </b><b>new </b>Error("[js.html5.WebSocket]WebSocket not connect!");}<b>this</b>._socket.send(a);},close:<b>function </b>(){<b>if </b>(<b>this</b>._socket){<b>this</b>._socket.close();}<b>this</b>._socket=<b>null</b>;}};

</pre>
<hr/>
</BODY>
</HTML>
