<!--  -->
<HTML>
<HEAD>
<TITLE></TITLE>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<LINK REL ="stylesheet" TYPE="text/css" HREF="../inc/stylesheet.css">
</HEAD>

<BODY style="margin:5px;">
<div style="float:right;">
<span class="button" onclick="if(window.history.length > 1) window.history.go(-1);">Back</span>
</div>
<div style="margin-left:5px;">util\js-util-ajax-min.js</div>
<pre class="source">
<span class="multiComment">/*!
 * @project JSDK JavaScript Development Kit
 * @copyright Copyright(c) 2004-2012, Dragonfly.org. All rights reserved.
 * @license LGPLv3
 * 
 * @version 0.1
 * @author feng.chun
 * @date 2011-09-19
 * 
 * @requires /core/js-core.js
 */</span>
<span class="multiComment">/*!
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.8.1
*/</span>
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:<b>false</b>,_use_default_post_header:<b>true</b>,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:<b>true</b>,_default_xhr_header:"XMLHttpRequest",_has_default_headers:<b>true</b>,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:<b>new </b>YAHOO.util.CustomEvent("start"),completeEvent:<b>new </b>YAHOO.util.CustomEvent("complete"),successEvent:<b>new </b>YAHOO.util.CustomEvent("success"),failureEvent:<b>new </b>YAHOO.util.CustomEvent("failure"),abortEvent:<b>new </b>YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:<b>function </b>(a){<b>this</b>._msxml_progid.unshift(a);},setDefaultPostHeader:<b>function </b>(a){<b>if </b>(<b>typeof </b>a=="string"){<b>this</b>._default_post_header=a;}<b>else </b>{<b>if </b>(<b>typeof </b>a=="boolean"){<b>this</b>._use_default_post_header=a;}}},setDefaultXhrHeader:<b>function </b>(a){<b>if </b>(<b>typeof </b>a=="string"){<b>this</b>._default_xhr_header=a;}<b>else </b>{<b>this</b>._use_default_xhr_header=a;}},setPollingInterval:<b>function </b>(a){<b>if </b>(<b>typeof </b>a=="number"&&isFinite(a)){<b>this</b>._polling_interval=a;}},createXhrObject:<b>function </b>(b){<b>var </b>d,a,f;<b>try </b>{a=<b>new </b>XMLHttpRequest();d={conn:a,tId:b,xhr:<b>true</b>};}<b>catch </b>(e){<b>for </b>(f=0;f&lt;<b>this</b>._msxml_progid.length;++f){<b>try </b>{a=<b>new </b>ActiveXObject(<b>this</b>._msxml_progid[f]);d={conn:a,tId:b,xhr:<b>true</b>};<b>break</b>;}<b>catch </b>(c){}}}<b>finally </b>{<b>return</b> d;}},getConnectionObject:<b>function </b>(a){<b>var </b>c,b=<b>this</b>._transaction_id;<b>try </b>{<b>if </b>(!a){c=<b>this</b>.createXhrObject(b);}<b>else </b>{c={tId:b};<b>if </b>(a==="xdr"){c.conn=<b>this</b>._transport;c.xdr=<b>true</b>;}<b>else </b>{<b>if </b>(a==="upload"){c.upload=<b>true</b>;}}}<b>if </b>(c){<b>this</b>._transaction_id++;}}<b>catch </b>(d){}<b>return</b> c;},asyncRequest:<b>function </b>(b,e,c,a){<b>var </b>d,f,g=(c&&c.argument)?c.argument:<b>null</b>;<b>if </b>(<b>this</b>._isFileUpload){f="upload";}<b>else </b>{<b>if </b>(c.xdr){f="xdr";}}d=<b>this</b>.getConnectionObject(f);<b>if </b>(!d){<b>return</b> <b>null</b>;}<b>else </b>{<b>if </b>(c&&c.customevents){<b>this</b>.initCustomEvents(d,c);}<b>if </b>(<b>this</b>._isFormSubmit){<b>if </b>(<b>this</b>._isFileUpload){<b>this</b>.uploadFile(d,c,e,a);<b>return</b> d;}<b>if </b>(b.toUpperCase()=="GET"){<b>if </b>(<b>this</b>._sFormData.length!==0){e+=((e.indexOf("?")==-1)?"?":"&")+<b>this</b>._sFormData;}}<b>else </b>{<b>if </b>(b.toUpperCase()=="POST"){a=a?<b>this</b>._sFormData+"&"+a:<b>this</b>._sFormData;}}}<b>if </b>(b.toUpperCase()=="GET"&&(c&&c.cache===<b>false</b>)){e+=((e.indexOf("?")==-1)?"?":"&")+"rnd="+<b>new </b>Date().valueOf().toString();}<b>if </b>(<b>this</b>._use_default_xhr_header){<b>if </b>(!<b>this</b>._default_headers["X-Requested-With"]){<b>this</b>.initHeader("X-Requested-With",<b>this</b>._default_xhr_header,<b>true</b>);}}<b>if </b>((b.toUpperCase()==="POST"&&<b>this</b>._use_default_post_header)&&<b>this</b>._isFormSubmit===<b>false</b>){<b>this</b>.initHeader("Content-Type",<b>this</b>._default_post_header);}<b>if </b>(d.xdr){<b>this</b>.xdr(d,b,e,c,a);<b>return</b> d;}d.conn.open(b,e,<b>true</b>);<b>if </b>(<b>this</b>._has_default_headers||<b>this</b>._has_http_headers){<b>this</b>.setHeader(d);}<b>this</b>.handleReadyState(d,c);d.conn.send(a||"");<b>if </b>(<b>this</b>._isFormSubmit===<b>true</b>){<b>this</b>.resetFormState();}<b>this</b>.startEvent.fire(d,g);<b>if </b>(d.startEvent){d.startEvent.fire(d,g);}<b>return</b> d;}},initCustomEvents:<b>function </b>(a,b){<b>var </b>c;<b>for </b>(c<b> in </b>b.customevents){<b>if </b>(<b>this</b>._customEvents[c][0]){a[<b>this</b>._customEvents[c][0]]=<b>new </b>YAHOO.util.CustomEvent(<b>this</b>._customEvents[c][1],(b.scope)?b.scope:<b>null</b>);a[<b>this</b>._customEvents[c][0]].subscribe(b.customevents[c]);}}},handleReadyState:<b>function </b>(c,b){<b>var </b>d=<b>this</b>,a=(b&&b.argument)?b.argument:<b>null</b>;<b>if </b>(b&&b.timeout){<b>this</b>._timeOut[c.tId]=window.setTimeout(<b>function </b>(){d.abort(c,b,<b>true</b>);},b.timeout);}<b>this</b>._poll[c.tId]=window.setInterval(<b>function </b>(){<b>if </b>(c.conn&&c.conn.readyState===4){window.clearInterval(d._poll[c.tId]);<b>delete </b>d._poll[c.tId];<b>if </b>(b&&b.timeout){window.clearTimeout(d._timeOut[c.tId]);<b>delete </b>d._timeOut[c.tId];}d.completeEvent.fire(c,a);<b>if </b>(c.completeEvent){c.completeEvent.fire(c,a);}d.handleTransactionResponse(c,b);}},<b>this</b>._polling_interval);},handleTransactionResponse:<b>function </b>(c,f,a){<b>var </b>j,d,h=(f&&f.argument)?f.argument:<b>null</b>,b=(c.r&&c.r.statusText==="xdr:success")?<b>true</b>:<b>false</b>,g=(c.r&&c.r.statusText==="xdr:failure")?<b>true</b>:<b>false</b>,e=a;<b>try </b>{<b>if </b>((c.conn.status!==undefined&&c.conn.status!==0)||b){j=c.conn.status;}<b>else </b>{<b>if </b>(g&&!e){j=0;}<b>else </b>{j=13030;}}}<b>catch </b>(i){j=13030;}<b>if </b>((j&gt;=200&&j&lt;300)||j===1223||b){d=c.xdr?c.r:<b>this</b>.createResponseObject(c,h);<b>if </b>(f&&f.success){<b>if </b>(!f.scope){f.success(d);}<b>else </b>{f.success.apply(f.scope,[d]);}}<b>this</b>.successEvent.fire(d);<b>if </b>(c.successEvent){c.successEvent.fire(d);}}<b>else </b>{<b>switch </b>(j){<b>case </b>12002:<b>case </b>12029:<b>case </b>12030:<b>case </b>12031:<b>case </b>12152:<b>case </b>13030:d=<b>this</b>.createExceptionObject(c.tId,h,(a?a:<b>false</b>));<b>if </b>(f&&f.failure){<b>if </b>(!f.scope){f.failure(d);}<b>else </b>{f.failure.apply(f.scope,[d]);}}<b>break</b>;default:d=(c.xdr)?c.response:<b>this</b>.createResponseObject(c,h);<b>if </b>(f&&f.failure){<b>if </b>(!f.scope){f.failure(d);}<b>else </b>{f.failure.apply(f.scope,[d]);}}}<b>this</b>.failureEvent.fire(d);<b>if </b>(c.failureEvent){c.failureEvent.fire(d);}}<b>this</b>.releaseObject(c);d=<b>null</b>;},createResponseObject:<b>function </b>(d,g){<b>var </b>a={},e={},i,b,h,c;<b>try </b>{b=d.conn.getAllResponseHeaders();h=b.split("\n");<b>for </b>(i=0;i&lt;h.length;i++){c=h[i].indexOf(":");<b>if </b>(c!=-1){e[h[i].substring(0,c)]=YAHOO.lang.trim(h[i].substring(c+2));}}}<b>catch </b>(f){}a.tId=d.tId;a.status=(d.conn.status==1223)?204:d.conn.status;a.statusText=(d.conn.status==1223)?"No Content":d.conn.statusText;a.getResponseHeader=e;a.getAllResponseHeaders=b;a.responseText=d.conn.responseText;a.responseXML=d.conn.responseXML;<b>if </b>(g){a.argument=g;}<b>return</b> a;},createExceptionObject:<b>function </b>(b,f,a){<b>var </b>d=0,c="communication failure",g=-1,h="transaction aborted",e={};e.tId=b;<b>if </b>(a){e.status=g;e.statusText=h;}<b>else </b>{e.status=d;e.statusText=c;}<b>if </b>(f){e.argument=f;}<b>return</b> e;},initHeader:<b>function </b>(a,b,c){<b>var </b>d=(c)?<b>this</b>._default_headers:<b>this</b>._http_headers;d[a]=b;<b>if </b>(c){<b>this</b>._has_default_headers=<b>true</b>;}<b>else </b>{<b>this</b>._has_http_headers=<b>true</b>;}},setHeader:<b>function </b>(a){<b>var </b>b;<b>if </b>(<b>this</b>._has_default_headers){<b>for </b>(b<b> in </b><b>this</b>._default_headers){<b>if </b>(YAHOO.lang.hasOwnProperty(<b>this</b>._default_headers,b)){a.conn.setRequestHeader(b,<b>this</b>._default_headers[b]);}}}<b>if </b>(<b>this</b>._has_http_headers){<b>for </b>(b<b> in </b><b>this</b>._http_headers){<b>if </b>(YAHOO.lang.hasOwnProperty(<b>this</b>._http_headers,b)){a.conn.setRequestHeader(b,<b>this</b>._http_headers[b]);}}<b>this</b>._http_headers={};<b>this</b>._has_http_headers=<b>false</b>;}},resetDefaultHeaders:<b>function </b>(){<b>this</b>._default_headers={};<b>this</b>._has_default_headers=<b>false</b>;},abort:<b>function </b>(d,b,a){<b>var </b>e,g=(b&&b.argument)?b.argument:<b>null</b>;d=d||{};<b>if </b>(d.conn){<b>if </b>(d.xhr){<b>if </b>(<b>this</b>.isCallInProgress(d)){d.conn.abort();window.clearInterval(<b>this</b>._poll[d.tId]);<b>delete </b><b>this</b>._poll[d.tId];<b>if </b>(a){window.clearTimeout(<b>this</b>._timeOut[d.tId]);<b>delete </b><b>this</b>._timeOut[d.tId];}e=<b>true</b>;}}<b>else </b>{<b>if </b>(d.xdr){d.conn.abort(d.tId);e=<b>true</b>;}}}<b>else </b>{<b>if </b>(d.upload){<b>var </b>f="yuiIO"+d.tId;<b>var </b>c=document.getElementById(f);<b>if </b>(c){YAHOO.util.Event.removeListener(c,"load");document.body.removeChild(c);<b>if </b>(a){window.clearTimeout(<b>this</b>._timeOut[d.tId]);<b>delete </b><b>this</b>._timeOut[d.tId];}e=<b>true</b>;}}<b>else </b>{e=<b>false</b>;}}<b>if </b>(e===<b>true</b>){<b>this</b>.abortEvent.fire(d,g);<b>if </b>(d.abortEvent){d.abortEvent.fire(d,g);}<b>this</b>.handleTransactionResponse(d,b,<b>true</b>);}<b>return</b> e;},isCallInProgress:<b>function </b>(a){a=a||{};<b>if </b>(a.xhr&&a.conn){<b>return</b> a.conn.readyState!==4&&a.conn.readyState!==0;}<b>else </b>{<b>if </b>(a.xdr&&a.conn){<b>return</b> a.conn.isCallInProgress(a.tId);}<b>else </b>{<b>if </b>(a.upload===<b>true</b>){<b>return</b> document.getElementById("yuiIO"+a.tId)?<b>true</b>:<b>false</b>;}<b>else </b>{<b>return</b> <b>false</b>;}}}},releaseObject:<b>function </b>(a){<b>if </b>(a&&a.conn){a.conn=<b>null</b>;a=<b>null</b>;}}};(<b>function </b>(){<b>var </b>c=YAHOO.util.Connect,b={};function f(k){<b>var </b>j='&lt;object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+k+'" width="0" height="0"&gt;'+'&lt;param name="movie" value="'+k+'"&gt;'+'&lt;param name="allowScriptAccess" value="always"&gt;'+"&lt;/object&gt;",i=document.createElement("div");document.body.appendChild(i);i.innerHTML=j;}function h(i,l,k,m,j){b[parseInt(i.tId)]={"o":i,"c":m};<b>if </b>(j){m.method=l;m.data=j;}i.conn.send(k,m,i.tId);}function e(i){f(i);c._transport=document.getElementById("YUIConnectionSwf");}function g(){c.xdrReadyEvent.fire();}function a(i,j){<b>if </b>(i){c.startEvent.fire(i,j.argument);<b>if </b>(i.startEvent){i.startEvent.fire(i,j.argument);}}}function d(j){<b>var </b>i=b[j.tId].o,k=b[j.tId].c;<b>if </b>(j.statusText==="xdr:start"){a(i,k);<b>return</b>;}j.responseText=decodeURI(j.responseText);i.r=j;<b>if </b>(k.argument){i.r.argument=k.argument;}<b>this</b>.handleTransactionResponse(i,k,j.statusText==="xdr:abort"?<b>true</b>:<b>false</b>);<b>delete </b>b[j.tId];}c.xdr=h;c.swf=f;c.transport=e;c.xdrReadyEvent=<b>new </b>YAHOO.util.CustomEvent("xdrReady");c.xdrReady=g;c.handleXdrResponse=d;})();(<b>function </b>(){<b>var </b>e=YAHOO.util.Connect,c=YAHOO.util.Event;e._isFormSubmit=<b>false</b>;e._isFileUpload=<b>false</b>;e._formNode=<b>null</b>;e._sFormData=<b>null</b>;e._submitElementValue=<b>null</b>;e.uploadEvent=<b>new </b>YAHOO.util.CustomEvent("upload"),e._hasSubmitListener=<b>function </b>(){<b>if </b>(c){c.addListener(document,"click",<b>function </b>(h){<b>var </b>i=c.getTarget(h),j=i.nodeName.toLowerCase();<b>if </b>((j==="input"||j==="button")&&(i.type&&i.type.toLowerCase()=="submit")){e._submitElementValue=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value);}});<b>return</b> <b>true</b>;}<b>return</b> <b>false</b>;}();function b(k,p,u){<b>var </b>l,v,m,o,h,n=<b>false</b>,r=[],i=0,s,q,t,j,w;<b>this</b>.resetFormState();<b>if </b>(<b>typeof </b>k=="string"){l=(document.getElementById(k)||document.forms[k]);}<b>else </b>{<b>if </b>(<b>typeof </b>k=="object"){l=k;}<b>else </b>{<b>return</b>;}}<b>if </b>(p){<b>this</b>.createFrame(u?u:<b>null</b>);<b>this</b>._isFormSubmit=<b>true</b>;<b>this</b>._isFileUpload=<b>true</b>;<b>this</b>._formNode=l;<b>return</b>;}<b>for </b>(s=0,q=l.elements.length;s&lt;q;++s){v=l.elements[s];h=v.disabled;m=v.name;<b>if </b>(!h&&m){m=encodeURIComponent(m)+"=";o=encodeURIComponent(v.value);<b>switch </b>(v.type){case"select-one":<b>if </b>(v.selectedIndex&gt;-1){w=v.options[v.selectedIndex];r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text);}<b>break</b>;case"select-multiple":<b>if </b>(v.selectedIndex&gt;-1){<b>for </b>(t=v.selectedIndex,j=v.options.length;t&lt;j;++t){w=v.options[t];<b>if </b>(w.selected){r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text);}}}<b>break</b>;case"radio":case"checkbox":<b>if </b>(v.checked){r[i++]=m+o;}<b>break</b>;case"file":<b>case </b>undefined:case"reset":case"button":<b>break</b>;case"submit":<b>if </b>(n===<b>false</b>){<b>if </b>(<b>this</b>._hasSubmitListener&&<b>this</b>._submitElementValue){r[i++]=<b>this</b>._submitElementValue;}n=<b>true</b>;}<b>break</b>;default:r[i++]=m+o;}}}<b>this</b>._isFormSubmit=<b>true</b>;<b>this</b>._sFormData=r.join("&");<b>this</b>.initHeader("Content-Type",<b>this</b>._default_form_header);<b>return</b> <b>this</b>._sFormData;}function f(){<b>this</b>._isFormSubmit=<b>false</b>;<b>this</b>._isFileUpload=<b>false</b>;<b>this</b>._formNode=<b>null</b>;<b>this</b>._sFormData="";}function g(j){<b>var </b>i="yuiIO"+<b>this</b>._transaction_id,h;<b>if </b>(YAHOO.env.ua.ie){h=document.createElement('&lt;iframe id="'+i+'" name="'+i+'" /&gt;');<b>if </b>(<b>typeof </b>j=="boolean"){h.src="javascript:<b>false</b>";}}<b>else </b>{h=document.createElement("iframe");h.id=i;h.name=i;}h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";document.body.appendChild(h);}function d(l){<b>var </b>i=[],k=l.split("&"),j,h;<b>for </b>(j=0;j&lt;k.length;j++){h=k[j].indexOf("=");<b>if </b>(h!=-1){i[j]=document.createElement("input");i[j].type="hidden";i[j].name=decodeURIComponent(k[j].substring(0,h));i[j].value=decodeURIComponent(k[j].substring(h+1));<b>this</b>._formNode.appendChild(i[j]);}}<b>return</b> i;}function a(t,i,s,u){<b>var </b>n="yuiIO"+t.tId,m="multipart/form-data",k=document.getElementById(n),r=(document.documentMode&&document.documentMode===8)?<b>true</b>:<b>false</b>,h=<b>this</b>,l=(i&&i.argument)?i.argument:<b>null</b>,j,o,v,p,w,q;w={action:<b>this</b>._formNode.getAttribute("action"),method:<b>this</b>._formNode.getAttribute("method"),target:<b>this</b>._formNode.getAttribute("target")};<b>this</b>._formNode.setAttribute("action",s);<b>this</b>._formNode.setAttribute("method","POST");<b>this</b>._formNode.setAttribute("target",n);<b>if </b>(YAHOO.env.ua.ie&&!r){<b>this</b>._formNode.setAttribute("encoding",m);}<b>else </b>{<b>this</b>._formNode.setAttribute("enctype",m);}<b>if </b>(u){j=<b>this</b>.appendPostData(u);}<b>this</b>._formNode.submit();<b>this</b>.startEvent.fire(t,l);<b>if </b>(t.startEvent){t.startEvent.fire(t,l);}<b>if </b>(i&&i.timeout){<b>this</b>._timeOut[t.tId]=window.setTimeout(<b>function </b>(){h.abort(t,i,<b>true</b>);},i.timeout);}<b>if </b>(j&&j.length&gt;0){<b>for </b>(o=0;o&lt;j.length;o++){<b>this</b>._formNode.removeChild(j[o]);}}<b>for </b>(v<b> in </b>w){<b>if </b>(YAHOO.lang.hasOwnProperty(w,v)){<b>if </b>(w[v]){<b>this</b>._formNode.setAttribute(v,w[v]);}<b>else </b>{<b>this</b>._formNode.removeAttribute(v);}}}<b>this</b>.resetFormState();q=<b>function </b>(){<b>if </b>(i&&i.timeout){window.clearTimeout(h._timeOut[t.tId]);<b>delete </b>h._timeOut[t.tId];}h.completeEvent.fire(t,l);<b>if </b>(t.completeEvent){t.completeEvent.fire(t,l);}p={tId:t.tId,argument:i.argument};<b>try </b>{p.responseText=k.contentWindow.document.body?k.contentWindow.document.body.innerHTML:k.contentWindow.document.documentElement.textContent;p.responseXML=k.contentWindow.document.XMLDocument?k.contentWindow.document.XMLDocument:k.contentWindow.document;}<b>catch </b>(x){}<b>if </b>(i&&i.upload){<b>if </b>(!i.scope){i.upload(p);}<b>else </b>{i.upload.apply(i.scope,[p]);}}h.uploadEvent.fire(p);<b>if </b>(t.uploadEvent){t.uploadEvent.fire(p);}c.removeListener(k,"load",q);setTimeout(<b>function </b>(){document.body.removeChild(k);h.releaseObject(t);},100);};c.addListener(k,"load",q);}e.setForm=b;e.resetFormState=f;e.createFrame=g;e.appendPostData=d;e.uploadFile=a;})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.1",build:"19"});js.util.Ajax=YAHOO.util.Connect;

</pre>
<hr/>
</BODY>
</HTML>
